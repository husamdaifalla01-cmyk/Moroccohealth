# P0.1 — Project Initialization (V100)

## Prompt ID: P0.1
## Phase: 0 - Infrastructure Setup
## Estimated Time: 2-3 hours
## Prerequisites: None (starting point)

---

## OVERVIEW

This prompt initializes the DAWA monorepo structure using Turborepo with pnpm workspaces.

## WORKSPACE STRUCTURE NOTE

> **IMPORTANT**: This documentation lives in `dawa-docs/` which is separate from the app code in `dawa-ma/`.
> 
> All paths in "Next Step" sections are relative to **workspace root**, not to `dawa-docs/`.
>
> When executing prompts with Claude Code, ensure you're referencing the correct folder.

---

## PROJECT STRUCTURE

```
workspace/
├── dawa-ma/                    # Main application monorepo
│   ├── apps/
│   │   ├── patient/            # Patient-facing web app
│   │   └── pharmacy/           # Pharmacy portal
│   ├── packages/
│   │   ├── ui/                 # Shared UI components
│   │   ├── services/           # Business logic
│   │   └── config/             # Shared configs
│   ├── supabase/
│   │   ├── migrations/
│   │   └── functions/
│   ├── package.json
│   ├── pnpm-workspace.yaml
│   └── turbo.json
│
└── dawa-docs/                  # Documentation (this repo)
    ├── docs/
    │   ├── DAWA_MASTER.md
    │   └── phases/
    └── prompts/
        ├── phase-0/
        ├── phase-1/
        └── phase-2/
```

---

## IMPLEMENTATION

### 1. Initialize Monorepo

```bash
# Create root directory
mkdir dawa-ma && cd dawa-ma

# Initialize with pnpm
pnpm init

# Create Turborepo config
cat > turbo.json << 'EOF'
{
  "$schema": "https://turbo.build/schema.json",
  "globalDependencies": ["**/.env.*local"],
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**", "dist/**"]
    },
    "lint": {
      "dependsOn": ["^build"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "typecheck": {
      "dependsOn": ["^build"]
    }
  }
}
EOF

# Create workspace config
cat > pnpm-workspace.yaml << 'EOF'
packages:
  - 'apps/*'
  - 'packages/*'
EOF
```

### 2. Create App Directories

```bash
# Create directory structure
mkdir -p apps/patient apps/pharmacy
mkdir -p packages/ui packages/services packages/config
mkdir -p supabase/migrations supabase/functions
```

### 3. Initialize Patient App

```bash
cd apps/patient
pnpm create next-app . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"
```

### 4. Root Package.json

```json
{
  "name": "dawa",
  "private": true,
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "lint": "turbo run lint",
    "typecheck": "turbo run typecheck",
    "dev:patient": "turbo run dev --filter=@dawa/patient",
    "dev:pharmacy": "turbo run dev --filter=@dawa/pharmacy"
  },
  "devDependencies": {
    "turbo": "^1.11.0"
  },
  "packageManager": "pnpm@8.14.0"
}
```

---

## SUCCESS CRITERIA

- [ ] Monorepo structure created with Turborepo
- [ ] pnpm workspaces configured
- [ ] apps/patient initialized with Next.js 14
- [ ] packages/ directories created
- [ ] supabase/ directory structure in place
- [ ] `pnpm dev` runs without errors

---

## NEXT STEP

After validation passes, proceed to:
→ `dawa-docs/prompts/phase-0/P0.2-supabase-setup.md`

Reference documentation:
→ `dawa-docs/docs/DAWA_MASTER.md`
→ `dawa-docs/docs/phases/PHASE_0.md`
